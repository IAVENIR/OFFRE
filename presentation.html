<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IAvenir - Transformation IA</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            iavenir: {
              50: '#f5f3ff', 100: '#ede9fe', 200: '#ddd6fe', 300: '#c4b5fd',
              400: '#a78bfa', 500: '#8B5CF6', 600: '#7c3aed', 700: '#6d28d9',
              800: '#5b21b6', 900: '#4c1d95'
            }
          }
        }
      }
    }
  </script>
  <style>
    html { scroll-behavior: smooth; }
    @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
    .animate-bounce { animation: bounce 2s infinite; }
  </style>
</head>
<body class="bg-white text-gray-900">
  <div id="app"></div>
  <script>
    const state = {
      includeAudit: true,
      includeFormation: true,
      parcours: 'complet',
      dateProchainPoint: '',
      auditConfig: { collaborateurs: 10 },
      formationConfig: { 
        format: 'presentiel', 
        duration: 1, 
        participants: 10,
        sessions: 1,
        dateFormation: '',
        outils: '',
        casUsages: ''
      }
    };

    const icons = {
      search: '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>',
      graduationCap: '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l9-5-9-5-9 5 9 5z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"/></svg>',
      lightbulb: '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/></svg>',
      check: '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>',
      trendingUp: '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/></svg>',
      clock: '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>',
      users: '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"/></svg>',
      award: '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"/></svg>',
      barChart: '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/></svg>',
      heart: '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/></svg>',
      star: '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"/></svg>',
      phone: '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>',
      mail: '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>',
      globe: '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"/></svg>',
      building: '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/></svg>',
      monitor: '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>',
      alertCircle: '<svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>',
      chevronDown: '<svg class="w-12 h-12" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>',
      chat: '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/></svg>',
      target: '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/></svg>',
      document: '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg>',
      clipboard: '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"/></svg>'
    };

    function calculateAuditDays(collaborateurs) {
      // Estimation: 2 jours base + 1 jour par tranche de 10
      return Math.min(2 + Math.ceil(collaborateurs / 10), 10);
    }

    function calculateAudit() {
      const collab = state.auditConfig.collaborateurs;
      // 6500€ pour 0-10 personnes, +2500€ par tranche de 10 supplémentaire
      const tranches = Math.floor(Math.max(0, collab - 1) / 10);
      const total = 6500 + (tranches * 2500);
      const days = calculateAuditDays(collab);
      return { days, total };
    }

    function calculateFormation() {
      const prices = { 0.5: 1400, 1: 2900, 2: 4900 };
      const basePrice = prices[state.formationConfig.duration] || 2900;
      const sessions = state.formationConfig.sessions || 1;
      let discount = 0;
      if (sessions >= 5) discount = 0.15;
      else if (sessions >= 3) discount = 0.10;
      else if (sessions >= 2) discount = 0.05;
      const subtotal = basePrice * sessions;
      const discountAmount = subtotal * discount;
      const final = subtotal - discountAmount;
      return { basePrice, sessions, discount, discountAmount, subtotal, final, pricePerSession: basePrice };
    }

    function calculateROI() {
      const avgSalary = 3500;
      const participants = state.formationConfig.participants;
      const licenseCostPerUser = 25;
      const hourlyRate = avgSalary / 151.67;
      
      // Calcul du temps gagné selon les nouvelles règles
      let timeSaved = 0;
      let timeSavedDisplay = '0h';
      
      if (state.includeFormation) {
        // Heures gagnées par la formation selon durée
        const formationHours = { 0.5: 1, 1: 2, 2: 3 };
        const formationTime = formationHours[state.formationConfig.duration] || 2;
        
        if (state.includeAudit) {
          // Audit + Formation: +2h bonus de l'audit
          timeSaved = 2 + formationTime;
          timeSavedDisplay = timeSaved + 'h';
        } else {
          // Formation seule
          timeSaved = formationTime;
          timeSavedDisplay = timeSaved + 'h';
        }
      }
      
      // Calcul des gains
      const avgWeeklyGains = participants * timeSaved * hourlyRate;
      const monthlyLicenseCost = licenseCostPerUser * participants;
      const avgMonthlyGains = (avgWeeklyGains * 4.33) - monthlyLicenseCost;
      const totalInvestment = (state.includeAudit ? calculateAudit().total : 0) + (state.includeFormation ? calculateFormation().final : 0);
      const avgPayback = avgMonthlyGains > 0 ? totalInvestment / avgMonthlyGains : 0;
      
      return { avgMonthlyGains, totalInvestment, avgPayback, monthlyLicenseCost, timeSaved, timeSavedDisplay };
    }

    function formatPrice(n) {
      return new Intl.NumberFormat('fr-FR').format(Math.round(n)) + ' €';
    }

    // Helper functions pour éviter les template literals imbriqués
    function getParcoursCompletHTML() {
      return `
        <div class="relative">
          <div class="absolute left-1/2 top-0 bottom-0 w-1 bg-gradient-to-b from-iavenir-300 via-iavenir-500 to-iavenir-700 hidden md:block"></div>
          <div class="space-y-12">
            <!-- ÉTAPE 1 : AUDIT -->
            <div class="relative">
              <div class="grid md:grid-cols-2 gap-8 items-start">
                <div class="md:text-right md:pr-12">
                  <div class="inline-block mb-3 px-3 py-1 bg-iavenir-100 border border-iavenir-200 rounded-full text-iavenir-700 text-sm font-semibold">Étape 1 · 3 à 10 jours</div>
                  <h3 class="text-3xl font-bold mb-4 text-iavenir-600">Audit Stratégique</h3>
                  <p class="text-gray-600 mb-4">Analyse approfondie de votre organisation pour identifier les opportunités IA.</p>
                  <div class="bg-gray-50 p-4 rounded-xl text-left">
                    <div class="text-sm font-semibold text-gray-800 mb-2">3 phases :</div>
                    <div class="space-y-2 text-sm text-gray-600">
                      <div class="flex items-start gap-2">
                        <span class="text-iavenir-500 font-bold">1.</span>
                        <div><strong>Immersion terrain</strong> - Entretiens individuels, observation des processus</div>
                      </div>
                      <div class="flex items-start gap-2">
                        <span class="text-iavenir-500 font-bold">2.</span>
                        <div><strong>Consolidation</strong> - Analyse des données, identification des quick wins</div>
                      </div>
                      <div class="flex items-start gap-2">
                        <span class="text-iavenir-500 font-bold">3.</span>
                        <div><strong>Restitution</strong> - Présentation des recommandations, roadmap</div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="absolute left-1/2 top-0 transform -translate-x-1/2 w-14 h-14 bg-iavenir-500 rounded-full border-4 border-white shadow-lg z-10 items-center justify-center hidden md:flex"><span class="text-white font-bold text-xl">1</span></div>
                <div class="md:pl-12">
                  <div class="bg-gradient-to-br from-purple-100 to-indigo-100 p-6 rounded-2xl border-2 border-purple-300 h-full">
                    <h4 class="text-xl font-bold text-purple-900 mb-4">Bénéfices</h4>
                    <ul class="space-y-3 text-gray-700">
                      <li class="flex items-start gap-2"><span class="text-green-600">✓</span> Vision claire des opportunités</li>
                      <li class="flex items-start gap-2"><span class="text-green-600">✓</span> ROI estimé par cas d&#39;usage</li>
                      <li class="flex items-start gap-2"><span class="text-green-600">✓</span> Roadmap personnalisée</li>
                      <li class="flex items-start gap-2"><span class="text-green-600">✓</span> Quick wins identifiés</li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
            <!-- ÉTAPE 2 : FORMATION -->
            <div class="relative">
              <div class="grid md:grid-cols-2 gap-8 items-start">
                <div class="md:pl-12 md:order-2">
                  <div class="inline-block mb-3 px-3 py-1 bg-iavenir-100 border border-iavenir-200 rounded-full text-iavenir-700 text-sm font-semibold">Étape 2 · 0.5 à 2 jours</div>
                  <h3 class="text-3xl font-bold mb-4 text-iavenir-600">Formation sur-mesure</h3>
                  <p class="text-gray-600 mb-4">Montée en compétences de vos équipes sur vos cas d&#39;usage prioritaires.</p>
                  <div class="bg-gray-50 p-4 rounded-xl">
                    <div class="text-sm font-semibold text-gray-800 mb-2">Programme adapté :</div>
                    <div class="space-y-2 text-sm text-gray-600">
                      <div class="flex items-start gap-2">
                        <span class="text-iavenir-500">•</span>
                        <div>Sessions de 12 participants max pour un suivi personnalisé</div>
                      </div>
                      <div class="flex items-start gap-2">
                        <span class="text-iavenir-500">•</span>
                        <div>80% de pratique sur vos cas métier réels</div>
                      </div>
                      <div class="flex items-start gap-2">
                        <span class="text-iavenir-500">•</span>
                        <div>Supports et ressources post-formation inclus</div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="absolute left-1/2 top-0 transform -translate-x-1/2 w-14 h-14 bg-iavenir-500 rounded-full border-4 border-white shadow-lg z-10 items-center justify-center hidden md:flex"><span class="text-white font-bold text-xl">2</span></div>
                <div class="md:text-right md:pr-12 md:order-1">
                  <div class="bg-gradient-to-br from-purple-100 to-indigo-100 p-6 rounded-2xl border-2 border-purple-300 h-full">
                    <h4 class="text-xl font-bold text-purple-900 mb-4">Bénéfices</h4>
                    <ul class="space-y-3 text-gray-700 md:text-right">
                      <li class="flex items-start gap-2 md:flex-row-reverse"><span class="text-green-600">✓</span> Équipes autonomes rapidement</li>
                      <li class="flex items-start gap-2 md:flex-row-reverse"><span class="text-green-600">✓</span> Cas pratiques métier</li>
                      <li class="flex items-start gap-2 md:flex-row-reverse"><span class="text-green-600">✓</span> Financement OPCO possible</li>
                      <li class="flex items-start gap-2 md:flex-row-reverse"><span class="text-green-600">✓</span> Certification Qualiopi</li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
            <!-- ÉTAPE 3 : CONSEIL -->
            <div class="relative">
              <div class="grid md:grid-cols-2 gap-8 items-start">
                <div class="md:text-right md:pr-12">
                  <div class="inline-block mb-3 px-3 py-1 bg-iavenir-100 border border-iavenir-200 rounded-full text-iavenir-700 text-sm font-semibold">Étape 3 · En continu</div>
                  <h3 class="text-3xl font-bold mb-4 text-iavenir-600">Missions de Conseil</h3>
                  <p class="text-gray-600 mb-4">Accompagnement stratégique pour pérenniser votre transformation IA.</p>
                  <div class="bg-gray-50 p-4 rounded-xl text-left">
                    <div class="text-sm font-semibold text-gray-800 mb-2">Services inclus :</div>
                    <div class="space-y-2 text-sm text-gray-600">
                      <div class="flex items-start gap-2">
                        <span class="text-iavenir-500">•</span>
                        <div>Suivi mensuel de l&#39;adoption et des KPIs</div>
                      </div>
                      <div class="flex items-start gap-2">
                        <span class="text-iavenir-500">•</span>
                        <div>Accompagnement au déploiement des outils</div>
                      </div>
                      <div class="flex items-start gap-2">
                        <span class="text-iavenir-500">•</span>
                        <div>Veille et recommandations sur les nouveautés IA</div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="absolute left-1/2 top-0 transform -translate-x-1/2 w-14 h-14 bg-iavenir-700 rounded-full border-4 border-white shadow-lg z-10 items-center justify-center hidden md:flex"><span class="text-white font-bold text-xl">3</span></div>
                <div class="md:pl-12">
                  <div class="bg-gradient-to-br from-purple-100 to-indigo-100 p-6 rounded-2xl border-2 border-purple-300 h-full">
                    <h4 class="text-xl font-bold text-purple-900 mb-4">Bénéfices</h4>
                    <ul class="space-y-3 text-gray-700">
                      <li class="flex items-start gap-2"><span class="text-green-600">✓</span> Avantage compétitif durable</li>
                      <li class="flex items-start gap-2"><span class="text-green-600">✓</span> Veille technologique</li>
                      <li class="flex items-start gap-2"><span class="text-green-600">✓</span> Organisation apprenante</li>
                      <li class="flex items-start gap-2"><span class="text-green-600">✓</span> ROI mesuré et optimisé</li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      `;
    }

    function getParcoursFormationHTML() {
      return `
        <div class="relative">
          <div class="absolute left-1/2 top-0 bottom-0 w-1 bg-gradient-to-b from-iavenir-300 via-iavenir-500 to-iavenir-600 hidden md:block"></div>
          <div class="space-y-12">
            <!-- ÉTAPE 1 : CADRAGE -->
            <div class="relative">
              <div class="grid md:grid-cols-2 gap-8 items-start">
                <div class="md:text-right md:pr-12">
                  <div class="inline-block mb-3 px-3 py-1 bg-iavenir-100 border border-iavenir-200 rounded-full text-iavenir-700 text-sm font-semibold">Étape 1 · 30 min à 1h</div>
                  <h3 class="text-3xl font-bold mb-4 text-iavenir-600">Cadrage de la mission</h3>
                  <p class="text-gray-600 mb-4">Échange pour la compréhension de votre besoin et définition des modalités.</p>
                  <div class="bg-gray-50 p-4 rounded-xl text-left">
                    <div class="text-sm font-semibold text-gray-800 mb-2">Ce que nous définissons ensemble :</div>
                    <div class="space-y-2 text-sm text-gray-600">
                      <div class="flex items-start gap-2">
                        <span class="text-iavenir-500">•</span>
                        <div>Modalités pédagogiques (présentiel/distanciel)</div>
                      </div>
                      <div class="flex items-start gap-2">
                        <span class="text-iavenir-500">•</span>
                        <div>3 cas d&#39;usage prioritaires à traiter</div>
                      </div>
                      <div class="flex items-start gap-2">
                        <span class="text-iavenir-500">•</span>
                        <div>Outils IA à intégrer dans la formation</div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="absolute left-1/2 top-0 transform -translate-x-1/2 w-14 h-14 bg-iavenir-500 rounded-full border-4 border-white shadow-lg z-10 items-center justify-center hidden md:flex"><span class="text-white font-bold text-xl">1</span></div>
                <div class="md:pl-12">
                  <div class="bg-gradient-to-br from-purple-100 to-indigo-100 p-6 rounded-2xl border-2 border-purple-300 h-full">
                    <h4 class="text-xl font-bold text-purple-900 mb-4">Bénéfices</h4>
                    <ul class="space-y-3 text-gray-700">
                      <li class="flex items-start gap-2"><span class="text-green-600">✓</span> Programme 100% adapté</li>
                      <li class="flex items-start gap-2"><span class="text-green-600">✓</span> Objectifs mesurables</li>
                      <li class="flex items-start gap-2"><span class="text-green-600">✓</span> Devis détaillé sous 48h</li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
            <!-- ÉTAPE 2 : CONCEPTION -->
            <div class="relative">
              <div class="grid md:grid-cols-2 gap-8 items-start">
                <div class="md:pl-12 md:order-2">
                  <div class="inline-block mb-3 px-3 py-1 bg-iavenir-100 border border-iavenir-200 rounded-full text-iavenir-700 text-sm font-semibold">Étape 2 · En amont</div>
                  <h3 class="text-3xl font-bold mb-4 text-iavenir-600">Conception du support</h3>
                  <p class="text-gray-600 mb-4">Création d&#39;un programme personnalisé avec vos cas d&#39;usage réels.</p>
                  <div class="bg-gray-50 p-4 rounded-xl">
                    <div class="text-sm font-semibold text-gray-800 mb-2">Notre travail en amont :</div>
                    <div class="space-y-2 text-sm text-gray-600">
                      <div class="flex items-start gap-2">
                        <span class="text-iavenir-500">•</span>
                        <div>Création d&#39;exercices sur VOS données réelles</div>
                      </div>
                      <div class="flex items-start gap-2">
                        <span class="text-iavenir-500">•</span>
                        <div>Préparation de prompts métier optimisés</div>
                      </div>
                      <div class="flex items-start gap-2">
                        <span class="text-iavenir-500">•</span>
                        <div>Support de formation personnalisé inclus</div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="absolute left-1/2 top-0 transform -translate-x-1/2 w-14 h-14 bg-iavenir-500 rounded-full border-4 border-white shadow-lg z-10 items-center justify-center hidden md:flex"><span class="text-white font-bold text-xl">2</span></div>
                <div class="md:text-right md:pr-12 md:order-1">
                  <div class="bg-gradient-to-br from-purple-100 to-indigo-100 p-6 rounded-2xl border-2 border-purple-300 h-full">
                    <h4 class="text-xl font-bold text-purple-900 mb-4">Bénéfices</h4>
                    <ul class="space-y-3 text-gray-700 md:text-right">
                      <li class="flex items-start gap-2 md:flex-row-reverse"><span class="text-green-600">✓</span> Cas pratiques sur VOS données</li>
                      <li class="flex items-start gap-2 md:flex-row-reverse"><span class="text-green-600">✓</span> Exercices métier concrets</li>
                      <li class="flex items-start gap-2 md:flex-row-reverse"><span class="text-green-600">✓</span> Application immédiate</li>
                      <li class="flex items-start gap-2 md:flex-row-reverse"><span class="text-green-600">✓</span> Livrables réutilisables</li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
            <!-- ÉTAPE 3 : FORMATION -->
            <div class="relative">
              <div class="grid md:grid-cols-2 gap-8 items-start">
                <div class="md:text-right md:pr-12">
                  <div class="inline-block mb-3 px-3 py-1 bg-iavenir-100 border border-iavenir-200 rounded-full text-iavenir-700 text-sm font-semibold">Étape 3 · 0.5 à 2 jours</div>
                  <h3 class="text-3xl font-bold mb-4 text-iavenir-600">Formation des équipes</h3>
                  <p class="text-gray-600 mb-4">Sessions interactives avec mise en pratique immédiate.</p>
                  <div class="bg-gray-50 p-4 rounded-xl text-left">
                    <div class="text-sm font-semibold text-gray-800 mb-2">Format de la formation :</div>
                    <div class="space-y-2 text-sm text-gray-600">
                      <div class="flex items-start gap-2">
                        <span class="text-iavenir-500">•</span>
                        <div>12 participants max par session</div>
                      </div>
                      <div class="flex items-start gap-2">
                        <span class="text-iavenir-500">•</span>
                        <div>80% de pratique, 20% de théorie</div>
                      </div>
                      <div class="flex items-start gap-2">
                        <span class="text-iavenir-500">•</span>
                        <div>Présentiel ou distanciel au choix</div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="absolute left-1/2 top-0 transform -translate-x-1/2 w-14 h-14 bg-iavenir-600 rounded-full border-4 border-white shadow-lg z-10 items-center justify-center hidden md:flex"><span class="text-white font-bold text-xl">3</span></div>
                <div class="md:pl-12">
                  <div class="bg-gradient-to-br from-purple-100 to-indigo-100 p-6 rounded-2xl border-2 border-purple-300 h-full">
                    <h4 class="text-xl font-bold text-purple-900 mb-4">Bénéfices</h4>
                    <ul class="space-y-3 text-gray-700">
                      <li class="flex items-start gap-2"><span class="text-green-600">✓</span> Équipes autonomes rapidement</li>
                      <li class="flex items-start gap-2"><span class="text-green-600">✓</span> Adoption immédiate</li>
                      <li class="flex items-start gap-2"><span class="text-green-600">✓</span> Financement OPCO possible</li>
                      <li class="flex items-start gap-2"><span class="text-green-600">✓</span> Certification Qualiopi</li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
            <!-- ÉTAPE 4 : SUIVI -->
            <div class="relative">
              <div class="grid md:grid-cols-2 gap-8 items-start">
                <div class="md:pl-12 md:order-2">
                  <div class="inline-block mb-3 px-3 py-1 bg-iavenir-100 border border-iavenir-200 rounded-full text-iavenir-700 text-sm font-semibold">Étape 4 · Post-formation</div>
                  <h3 class="text-3xl font-bold mb-4 text-iavenir-600">Suivi & Mesure</h3>
                  <p class="text-gray-600 mb-4">Accompagnement post-formation pour garantir l&#39;ancrage des compétences.</p>
                  <div class="bg-gray-50 p-4 rounded-xl">
                    <div class="text-sm font-semibold text-gray-800 mb-2">Suivi inclus :</div>
                    <div class="space-y-2 text-sm text-gray-600">
                      <div class="flex items-start gap-2">
                        <span class="text-iavenir-500">•</span>
                        <div>Point de suivi à M+1</div>
                      </div>
                      <div class="flex items-start gap-2">
                        <span class="text-iavenir-500">•</span>
                        <div>Mesure du temps gagné par personne</div>
                      </div>
                      <div class="flex items-start gap-2">
                        <span class="text-iavenir-500">•</span>
                        <div>Ajustements et conseils si nécessaire</div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="absolute left-1/2 top-0 transform -translate-x-1/2 w-14 h-14 bg-iavenir-700 rounded-full border-4 border-white shadow-lg z-10 items-center justify-center hidden md:flex"><span class="text-white font-bold text-xl">4</span></div>
                <div class="md:text-right md:pr-12 md:order-1">
                  <div class="bg-gradient-to-br from-purple-100 to-indigo-100 p-6 rounded-2xl border-2 border-purple-300 h-full">
                    <h4 class="text-xl font-bold text-purple-900 mb-4">Bénéfices</h4>
                    <ul class="space-y-3 text-gray-700 md:text-right">
                      <li class="flex items-start gap-2 md:flex-row-reverse"><span class="text-green-600">✓</span> ROI mesuré et documenté</li>
                      <li class="flex items-start gap-2 md:flex-row-reverse"><span class="text-green-600">✓</span> Ajustements si nécessaire</li>
                      <li class="flex items-start gap-2 md:flex-row-reverse"><span class="text-green-600">✓</span> Pérennisation des acquis</li>
                      <li class="flex items-start gap-2 md:flex-row-reverse"><span class="text-green-600">✓</span> Rapport de fin de mission</li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      `;
    }

    function getTimelineHTML() {
      return `
        <div class="relative flex justify-between">
          <div class="flex flex-col items-center">
            <div class="w-12 h-12 bg-iavenir-500 rounded-full flex items-center justify-center text-white font-bold shadow-lg z-10">${state.parcours === 'complet' ? icons.search : icons.chat}</div>
            <div class="mt-3 text-center"><div class="font-semibold text-gray-900 text-sm">${state.parcours === 'complet' ? 'Audit' : 'Cadrage'}</div></div>
          </div>
          <div class="flex flex-col items-center">
            <div class="w-12 h-12 bg-iavenir-500 rounded-full flex items-center justify-center text-white font-bold shadow-lg z-10">${icons.graduationCap}</div>
            <div class="mt-3 text-center"><div class="font-semibold text-gray-900 text-sm">Formation</div></div>
          </div>
          <div class="flex flex-col items-center">
            <div class="w-12 h-12 bg-white border-2 border-iavenir-400 rounded-full flex items-center justify-center text-iavenir-600 font-bold shadow z-10"><span class="text-xs">M+1</span></div>
            <div class="mt-3 text-center"><div class="font-semibold text-gray-900 text-sm">Suivi KPI</div></div>
          </div>
          <div class="flex flex-col items-center">
            <div class="w-12 h-12 bg-white border-2 border-iavenir-500 rounded-full flex items-center justify-center text-iavenir-600 font-bold shadow z-10"><span class="text-xs">M+6</span></div>
            <div class="mt-3 text-center"><div class="font-semibold text-gray-900 text-sm">Comité IA</div></div>
          </div>
          <div class="flex flex-col items-center">
            <div class="w-12 h-12 bg-white border-2 border-iavenir-500 rounded-full flex items-center justify-center text-iavenir-600 font-bold shadow z-10"><span class="text-xs">M+9</span></div>
            <div class="mt-3 text-center"><div class="font-semibold text-gray-900 text-sm">Comité IA</div></div>
          </div>
          <div class="flex flex-col items-center">
            <div class="w-12 h-12 bg-iavenir-600 rounded-full flex items-center justify-center text-white font-bold shadow-lg z-10">${icons.award}</div>
            <div class="mt-3 text-center"><div class="font-semibold text-gray-900 text-sm">Bilan annuel</div></div>
          </div>
        </div>
      `;
    }

    function getConfigurateurCompletHTML(audit, formation) {
      let html = '<div class="grid md:grid-cols-2 gap-8">';
      
      // Audit card
      html += '<div class="bg-white p-6 rounded-2xl border-2 ' + (state.includeAudit ? 'border-iavenir-300' : 'border-gray-200') + ' shadow-lg">';
      html += '<div class="flex items-center justify-between mb-6">';
      html += '<div class="flex items-center gap-3">';
      html += '<div class="w-10 h-10 bg-iavenir-100 rounded-xl flex items-center justify-center text-iavenir-600">' + icons.search + '</div>';
      html += '<h3 class="text-xl font-bold text-gray-900">Audit Stratégique</h3></div>';
      html += '<button onclick="toggleAudit()" class="w-14 h-7 rounded-full transition-colors ' + (state.includeAudit ? 'bg-iavenir-500' : 'bg-gray-300') + '">';
      html += '<div class="w-6 h-6 bg-white rounded-full shadow transform transition-transform ' + (state.includeAudit ? 'translate-x-7' : 'translate-x-1') + '"></div>';
      html += '</button></div>';
      
      if (state.includeAudit) {
        html += '<div class="space-y-4">';
        html += '<div><label class="block text-sm font-medium text-gray-700 mb-2">Nombre de collaborateurs à auditer</label>';
        html += '<input type="number" id="auditCollaborateurs" value="' + state.auditConfig.collaborateurs + '" min="1" max="10000" class="w-full p-4 rounded-xl border-2 border-gray-200 text-center text-2xl font-bold focus:border-iavenir-500 focus:outline-none"></div>';
        html += '<div class="bg-gray-50 p-4 rounded-xl space-y-3">';
        html += '<div class="flex justify-between items-center"><span class="text-gray-600">Durée recommandée</span><span class="font-bold text-iavenir-600">' + audit.days + ' jours</span></div>';
        html += '<div class="flex justify-between items-center pt-3 border-t border-gray-200"><span class="font-bold text-gray-900">Total Audit</span><span class="text-2xl font-bold text-iavenir-600">' + formatPrice(audit.total) + '</span></div>';
        html += '</div></div>';
      } else {
        html += '<div class="text-center py-12 text-gray-400"><p>Cliquez pour inclure l&#39;audit</p></div>';
      }
      html += '</div>';
      
      // Formation card
      html += '<div class="bg-white p-6 rounded-2xl border-2 ' + (state.includeFormation ? 'border-iavenir-300' : 'border-gray-200') + ' shadow-lg">';
      html += '<div class="flex items-center justify-between mb-2">';
      html += '<div class="flex items-center gap-3">';
      html += '<div class="w-10 h-10 bg-iavenir-100 rounded-xl flex items-center justify-center text-iavenir-600">' + icons.graduationCap + '</div>';
      html += '<h3 class="text-xl font-bold text-gray-900">Formation sur-mesure</h3></div>';
      html += '<button onclick="toggleFormation()" class="w-14 h-7 rounded-full transition-colors ' + (state.includeFormation ? 'bg-iavenir-500' : 'bg-gray-300') + '">';
      html += '<div class="w-6 h-6 bg-white rounded-full shadow transform transition-transform ' + (state.includeFormation ? 'translate-x-7' : 'translate-x-1') + '"></div>';
      html += '</button></div>';
      html += '<div class="flex items-center gap-1 text-iavenir-600 text-sm mb-4 ml-13"><span class="text-iavenir-500">' + icons.award + '</span><span>Certifiée Qualiopi</span></div>';
      
      if (state.includeFormation) {
        html += '<div class="space-y-4">';
        
        // Format
        html += '<div><label class="block text-sm font-medium text-gray-700 mb-2">Format</label>';
        html += '<div class="grid grid-cols-2 gap-3">';
        html += '<button onclick="setFormationFormat(\'presentiel\')" class="p-3 rounded-xl transition flex items-center justify-center gap-2 ' + (state.formationConfig.format === 'presentiel' ? 'bg-iavenir-500 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200') + '"><span>' + icons.building + '</span><span class="font-semibold">Présentiel</span></button>';
        html += '<button onclick="setFormationFormat(\'distanciel\')" class="p-3 rounded-xl transition flex items-center justify-center gap-2 ' + (state.formationConfig.format === 'distanciel' ? 'bg-iavenir-500 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200') + '"><span>' + icons.monitor + '</span><span class="font-semibold">Distanciel</span></button>';
        html += '</div></div>';
        
        // Durée
        html += '<div><label class="block text-sm font-medium text-gray-700 mb-2">Durée par session</label>';
        html += '<div class="grid grid-cols-3 gap-2">';
        html += '<button onclick="setFormationDuration(0.5)" class="p-3 rounded-xl transition text-center ' + (state.formationConfig.duration === 0.5 ? 'bg-iavenir-500 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200') + '"><div class="font-bold">0.5 jour</div><div class="text-sm ' + (state.formationConfig.duration === 0.5 ? 'text-iavenir-100' : 'text-gray-500') + '">1 400 €</div></button>';
        html += '<button onclick="setFormationDuration(1)" class="p-3 rounded-xl transition text-center ' + (state.formationConfig.duration === 1 ? 'bg-iavenir-500 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200') + '"><div class="font-bold">1 jour</div><div class="text-sm ' + (state.formationConfig.duration === 1 ? 'text-iavenir-100' : 'text-gray-500') + '">2 900 €</div></button>';
        html += '<button onclick="setFormationDuration(2)" class="p-3 rounded-xl transition text-center ' + (state.formationConfig.duration === 2 ? 'bg-iavenir-500 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200') + '"><div class="font-bold">2 jours</div><div class="text-sm ' + (state.formationConfig.duration === 2 ? 'text-iavenir-100' : 'text-gray-500') + '">4 900 €</div></button>';
        html += '</div></div>';
        
        // Sessions + Participants
        html += '<div class="grid grid-cols-2 gap-4">';
        html += '<div><label class="block text-sm font-medium text-gray-700 mb-2">Nombre de sessions</label>';
        html += '<input type="number" id="formationSessions" value="' + state.formationConfig.sessions + '" min="1" max="50" class="w-full p-4 rounded-xl border-2 border-gray-200 text-center text-2xl font-bold focus:border-iavenir-500 focus:outline-none">';
        html += '<div class="text-xs text-gray-500 mt-1">12 pers. max/session</div></div>';
        html += '<div><label class="block text-sm font-medium text-gray-700 mb-2">Nombre de participants</label>';
        html += '<input type="number" id="formationParticipants" value="' + state.formationConfig.participants + '" min="1" max="500" class="w-full p-4 rounded-xl border-2 border-gray-200 text-center text-2xl font-bold focus:border-iavenir-500 focus:outline-none"></div>';
        html += '</div>';
        
        // Récap
        html += '<div class="bg-gray-50 p-4 rounded-xl space-y-2">';
        html += '<div class="flex justify-between items-center"><span class="text-gray-600">Prix par session</span><span class="font-bold text-iavenir-600">' + formatPrice(formation.pricePerSession) + '</span></div>';
        if (formation.discount > 0) {
          html += '<div class="flex justify-between items-center text-green-600"><span>Remise volume (-' + Math.round(formation.discount * 100) + '%)</span><span class="font-semibold">-' + formatPrice(formation.discountAmount) + '</span></div>';
        }
        html += '<div class="flex justify-between items-center pt-3 border-t border-gray-200"><span class="font-bold text-gray-900">Total Formation (' + formation.sessions + ' session' + (formation.sessions > 1 ? 's' : '') + ')</span><span class="text-2xl font-bold text-iavenir-600">' + formatPrice(formation.final) + '</span></div>';
        html += '</div></div>';
      } else {
        html += '<div class="text-center py-12 text-gray-400"><p>Cliquez pour inclure la formation</p></div>';
      }
      html += '</div></div>';
      
      return html;
    }

    function getConfigurateurFormationHTML(formation) {
      let html = '<div class="bg-white p-8 rounded-2xl border-2 border-iavenir-500 shadow-lg">';
      html += '<h3 class="text-2xl font-bold text-gray-900 mb-6 text-center">Configuration détaillée de votre formation</h3>';
      
      // Format + Durée
      html += '<div class="grid md:grid-cols-2 gap-6 mb-6">';
      html += '<div><label class="block text-sm font-medium text-gray-700 mb-2">Format</label>';
      html += '<div class="grid grid-cols-2 gap-2">';
      html += '<button onclick="setFormationFormat(\'presentiel\')" class="p-3 rounded-xl transition ' + (state.formationConfig.format === 'presentiel' ? 'bg-iavenir-500 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200') + '"><div class="flex items-center justify-center gap-2"><span>' + icons.building + '</span><span class="font-bold">Présentiel</span></div></button>';
      html += '<button onclick="setFormationFormat(\'distanciel\')" class="p-3 rounded-xl transition ' + (state.formationConfig.format === 'distanciel' ? 'bg-iavenir-500 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200') + '"><div class="flex items-center justify-center gap-2"><span>' + icons.monitor + '</span><span class="font-bold">Distanciel</span></div></button>';
      html += '</div></div>';
      
      html += '<div><label class="block text-sm font-medium text-gray-700 mb-2">Durée par session</label>';
      html += '<div class="grid grid-cols-3 gap-2">';
      html += '<button onclick="setFormationDuration(0.5)" class="p-3 rounded-xl transition text-center ' + (state.formationConfig.duration === 0.5 ? 'bg-iavenir-500 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200') + '"><div class="font-bold">0.5j</div><div class="text-xs ' + (state.formationConfig.duration === 0.5 ? 'text-iavenir-100' : 'text-gray-500') + '">1 400 €</div></button>';
      html += '<button onclick="setFormationDuration(1)" class="p-3 rounded-xl transition text-center ' + (state.formationConfig.duration === 1 ? 'bg-iavenir-500 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200') + '"><div class="font-bold">1j</div><div class="text-xs ' + (state.formationConfig.duration === 1 ? 'text-iavenir-100' : 'text-gray-500') + '">2 900 €</div></button>';
      html += '<button onclick="setFormationDuration(2)" class="p-3 rounded-xl transition text-center ' + (state.formationConfig.duration === 2 ? 'bg-iavenir-500 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200') + '"><div class="font-bold">2j</div><div class="text-xs ' + (state.formationConfig.duration === 2 ? 'text-iavenir-100' : 'text-gray-500') + '">4 900 €</div></button>';
      html += '</div></div></div>';
      
      // Sessions + Participants + Date
      html += '<div class="grid md:grid-cols-3 gap-6 mb-6">';
      html += '<div><label class="block text-sm font-medium text-gray-700 mb-2">Nombre de sessions</label>';
      html += '<input type="number" id="formationSessions" value="' + state.formationConfig.sessions + '" min="1" max="50" class="w-full p-3 rounded-xl border-2 border-gray-200 text-center text-xl font-bold focus:border-iavenir-500 focus:outline-none">';
      html += '<div class="text-xs text-gray-500 mt-1">12 pers. max/session</div></div>';
      
      html += '<div><label class="block text-sm font-medium text-gray-700 mb-2">Nombre de participants</label>';
      html += '<input type="number" id="formationParticipants" value="' + state.formationConfig.participants + '" min="1" max="500" class="w-full p-3 rounded-xl border-2 border-gray-200 text-center text-xl font-bold focus:border-iavenir-500 focus:outline-none"></div>';
      
      html += '<div><label class="block text-sm font-medium text-gray-700 mb-2">Date de la formation</label>';
      html += '<input type="date" id="formationDate" value="' + state.formationConfig.dateFormation + '" class="w-full p-3 rounded-xl border-2 border-gray-200 focus:border-iavenir-500 focus:outline-none"></div></div>';
      
      // Outils + Cas d'usage
      html += '<div class="grid md:grid-cols-2 gap-6 mb-6">';
      html += '<div><label class="block text-sm font-medium text-gray-700 mb-2">Outil(s) sur lesquels former</label>';
      html += '<textarea id="formationOutils" placeholder="Ex: ChatGPT, Claude, Copilot..." rows="3" class="w-full p-3 rounded-xl border-2 border-gray-200 focus:border-iavenir-500 focus:outline-none resize-none">' + state.formationConfig.outils + '</textarea></div>';
      
      html += '<div><label class="block text-sm font-medium text-gray-700 mb-2">Cas d\'usage à traiter (3 recommandés)</label>';
      html += '<textarea id="formationCasUsages" placeholder="Ex: Rédaction de mails, Analyse de données..." rows="3" class="w-full p-3 rounded-xl border-2 border-gray-200 focus:border-iavenir-500 focus:outline-none resize-none">' + state.formationConfig.casUsages + '</textarea></div></div>';
      
      // Récapitulatif
      html += '<div class="bg-gray-50 p-6 rounded-xl">';
      html += '<h4 class="font-bold text-gray-900 mb-4">Récapitulatif</h4>';
      html += '<div class="grid grid-cols-4 gap-4 mb-4 text-center">';
      html += '<div><div class="text-sm text-gray-600">Format</div><div class="font-bold text-iavenir-700">' + (state.formationConfig.format === 'presentiel' ? 'Présentiel' : 'Distanciel') + '</div></div>';
      html += '<div><div class="text-sm text-gray-600">Durée</div><div class="font-bold text-iavenir-700">' + state.formationConfig.duration + 'j</div></div>';
      html += '<div><div class="text-sm text-gray-600">Sessions</div><div class="font-bold text-iavenir-700">' + formation.sessions + '</div></div>';
      html += '<div><div class="text-sm text-gray-600">Participants</div><div class="font-bold text-iavenir-700">' + state.formationConfig.participants + '</div></div></div>';
      if (formation.discount > 0) {
        html += '<div class="flex justify-between items-center mb-2 text-green-600"><span>Remise volume -' + Math.round(formation.discount * 100) + '%</span><span>-' + formatPrice(formation.discountAmount) + '</span></div>';
      }
      html += '<div class="border-t border-gray-200 pt-4 mt-2"><div class="flex justify-between items-center"><span class="text-lg font-bold text-gray-900">Total Formation (' + formation.sessions + ' session' + (formation.sessions > 1 ? 's' : '') + ')</span><span class="text-3xl font-bold text-iavenir-600">' + formatPrice(formation.final) + '</span></div>';
      html += '<div class="text-sm text-gray-500 text-right">HT - Hors frais de déplacement</div></div></div>';
      
      html += '</div>';
      return html;
    }

    function getROIHTML(roi) {
      let html = '<div class="mt-10 bg-white p-8 rounded-2xl border-2 border-iavenir-200 shadow-lg">';
      html += '<div class="text-center mb-6">';
      html += '<div class="w-12 h-12 bg-iavenir-100 rounded-xl flex items-center justify-center mx-auto mb-3 text-iavenir-600">' + icons.trendingUp + '</div>';
      html += '<h3 class="text-2xl font-bold text-gray-900 mb-1">Votre ROI Estimé</h3>';
      html += '<p class="text-gray-600 text-sm">Basé sur ' + state.formationConfig.participants + ' collaborateur(s) formé(s)</p>';
      html += '</div>';
      html += '<div class="grid md:grid-cols-3 gap-6 mb-6">';
      html += '<div class="bg-iavenir-50 p-4 rounded-xl text-center">';
      html += '<div class="text-sm text-gray-600 mb-1">Temps gagné / pers. / sem.</div>';
      html += '<div class="text-2xl font-bold text-iavenir-600">' + roi.timeSavedDisplay + '</div>';
      html += '</div>';
      html += '<div class="bg-iavenir-50 p-4 rounded-xl text-center">';
      html += '<div class="text-sm text-gray-600 mb-1">Gains nets / mois</div>';
      html += '<div class="text-2xl font-bold text-iavenir-600">' + formatPrice(roi.avgMonthlyGains) + '</div>';
      html += '<div class="text-xs text-gray-500">après coût licences</div>';
      html += '</div>';
      html += '<div class="bg-iavenir-50 p-4 rounded-xl text-center">';
      html += '<div class="text-sm text-gray-600 mb-1">Retour sur invest.</div>';
      html += '<div class="text-2xl font-bold text-iavenir-600">' + (roi.avgPayback > 0 ? Math.floor(roi.avgPayback) + ' mois' : '-') + '</div>';
      html += '</div></div>';
      html += '<div class="bg-gray-50 p-4 rounded-xl">';
      html += '<div class="text-sm font-semibold text-gray-700 mb-2">Hypothèses de calcul</div>';
      html += '<ul class="text-xs text-gray-600 space-y-1">';
      html += '<li>• Salaire moyen chargé : 3 500 €/mois</li>';
      html += '<li>• Taux d\'adoption : 75%</li>';
      html += '<li>• Bonus maturité (avec formation) : +15%</li>';
      html += '<li>• Coût licences IA : 25 €/utilisateur/mois</li>';
      html += '</ul></div></div>';
      return html;
    }

    function render() {
      const audit = calculateAudit();
      const formation = calculateFormation();
      const roi = calculateROI();
      const totalDevis = (state.includeAudit ? audit.total : 0) + (state.includeFormation ? formation.final : 0);
      const isComplet = state.parcours === 'complet';
      
      document.getElementById('app').innerHTML = `
        <nav class="fixed top-0 left-0 right-0 bg-white/95 backdrop-blur-sm shadow-sm z-50">
          <div class="max-w-7xl mx-auto px-6 py-3">
            <div class="flex items-center justify-between">
              <div class="text-2xl font-bold text-iavenir-500">IAvenir</div>
              <div class="hidden md:flex items-center gap-6 text-sm">
                <a href="#methodologie" class="text-gray-600 hover:text-iavenir-500 transition">Méthodologie</a>
                <a href="#resultats" class="text-gray-600 hover:text-iavenir-500 transition">Résultats</a>
                <a href="#configurateur" class="text-gray-600 hover:text-iavenir-500 transition">Configurateur</a>
                <a href="#action" class="bg-iavenir-500 text-white px-4 py-2 rounded-full hover:bg-iavenir-600 transition">Passer à l&#39;action</a>
              </div>
            </div>
          </div>
        </nav>

        <section class="bg-white pt-24 pb-16">
          <div class="max-w-6xl mx-auto px-6 text-center">
            <h1 class="text-4xl md:text-5xl font-bold mb-4 text-gray-900">Transformez votre entreprise<br>grâce à l&#39;IA</h1>
            <p class="text-xl text-gray-600 mb-12 max-w-2xl mx-auto">De l&#39;audit stratégique à la montée en compétences,<br>nous vous accompagnons à chaque étape.</p>
            
            <div class="grid md:grid-cols-2 gap-8 max-w-5xl mx-auto mb-12">
              <div class="bg-gray-50 p-8 rounded-2xl border-2 border-gray-200">
                <div class="inline-block mb-4 px-4 py-2 bg-gray-200 rounded-full text-gray-700 text-sm font-bold">POINT A · AUJOURD'HUI</div>
                <div class="w-16 h-16 bg-gray-200 rounded-xl flex items-center justify-center mb-4 mx-auto text-gray-500">${icons.alertCircle}</div>
                <h3 class="text-2xl font-bold mb-4 text-gray-800">Votre Situation</h3>
                <p class="text-gray-500 text-lg italic">À définir ensemble lors de notre échange...</p>
              </div>
              <div class="bg-iavenir-500 p-8 rounded-2xl shadow-xl text-white">
                <div class="inline-block mb-4 px-4 py-2 bg-white/20 rounded-full text-white text-sm font-bold">POINT B · DANS 2-3 MOIS</div>
                <div class="w-16 h-16 bg-white/20 rounded-xl flex items-center justify-center mb-4 mx-auto">${icons.trendingUp}</div>
                <h3 class="text-2xl font-bold mb-4">Vos Résultats</h3>
                <div class="text-left space-y-3">
                  <div class="flex items-start gap-3"><span class="mt-1">${icons.check}</span><div><p class="font-bold">+15% à +40% de productivité</p></div></div>
                  <div class="flex items-start gap-3"><span class="mt-1">${icons.check}</span><div><p class="font-bold">Équipes autonomes et confiantes</p></div></div>
                  <div class="flex items-start gap-3"><span class="mt-1">${icons.check}</span><div><p class="font-bold">ROI mesurable</p></div></div>
                  <div class="flex items-start gap-3"><span class="mt-1">${icons.check}</span><div><p class="font-bold">Avantage compétitif durable</p></div></div>
                </div>
              </div>
            </div>
            <div class="animate-bounce text-gray-400">${icons.chevronDown}</div>
          </div>
        </section>

        <section id="methodologie" class="py-16 bg-white">
          <div class="max-w-6xl mx-auto px-6">
            <div class="text-center mb-8">
              <h2 class="text-3xl font-bold text-gray-900 mb-3">Notre Méthodologie</h2>
              <p class="text-gray-600 max-w-2xl mx-auto mb-6">Choisissez le parcours adapté à vos besoins</p>
              
              <div class="inline-flex bg-gray-100 rounded-full p-1 mb-8">
                <button onclick="setParcours('complet')" class="px-6 py-2 rounded-full text-sm font-semibold transition-all ${isComplet ? 'bg-iavenir-500 text-white shadow' : 'text-gray-600 hover:text-gray-900'}">
                  Accompagnement IAvenir
                </button>
                <button onclick="setParcours('formation')" class="px-6 py-2 rounded-full text-sm font-semibold transition-all ${!isComplet ? 'bg-iavenir-500 text-white shadow' : 'text-gray-600 hover:text-gray-900'}">
                  Formation seule
                </button>
              </div>
            </div>
            
            ${isComplet ? getParcoursCompletHTML() : getParcoursFormationHTML()}
          </div>
        </section>

        <section class="py-12 bg-gray-50">
          <div class="max-w-5xl mx-auto px-6">
            <div class="text-center mb-8">
              <h2 class="text-2xl font-bold text-gray-900">Votre parcours sur 12 mois</h2>
            </div>
            <div class="relative">
              <div class="absolute top-6 left-0 right-0 h-0.5 bg-gradient-to-r from-iavenir-300 via-iavenir-500 to-iavenir-600"></div>
              ${getTimelineHTML()}
            </div>
            <p class="text-center text-sm text-gray-500 mt-8">Un référent interne est nommé dès le lancement pour assurer le suivi.</p>
          </div>
        </section>

        <section id="resultats" class="py-16 bg-white">
          <div class="max-w-6xl mx-auto px-6">
            <div class="text-center mb-12">
              <h2 class="text-3xl font-bold text-gray-900 mb-3">Résultats pour l&#39;entreprise</h2>
            </div>
            <div class="grid md:grid-cols-3 gap-6 mb-8">
              <div class="bg-gray-50 p-6 rounded-2xl border border-gray-200 text-center">
                <div class="w-12 h-12 bg-iavenir-100 rounded-xl flex items-center justify-center mx-auto mb-4 text-iavenir-600">${icons.clock}</div>
                <div class="text-3xl font-bold text-iavenir-600 mb-2">2-5h</div>
                <div class="text-gray-700 font-semibold mb-2">gagnées / personne / semaine</div>
              </div>
              <div class="bg-gray-50 p-6 rounded-2xl border border-gray-200 text-center">
                <div class="w-12 h-12 bg-iavenir-100 rounded-xl flex items-center justify-center mx-auto mb-4 text-iavenir-600">${icons.heart}</div>
                <div class="text-3xl font-bold text-iavenir-600 mb-2">Humain</div>
                <div class="text-gray-700 font-semibold mb-2">Engagement & bien-être</div>
              </div>
              <div class="bg-gray-50 p-6 rounded-2xl border border-gray-200 text-center">
                <div class="w-12 h-12 bg-iavenir-100 rounded-xl flex items-center justify-center mx-auto mb-4 text-iavenir-600">${icons.star}</div>
                <div class="text-3xl font-bold text-iavenir-600 mb-2">98%</div>
                <div class="text-gray-700 font-semibold mb-2">Taux de satisfaction</div>
              </div>
            </div>
          </div>
        </section>

        <section id="configurateur" class="py-16 bg-gray-50">
          <div class="max-w-5xl mx-auto px-6">
            <div class="text-center mb-10">
              <h2 class="text-3xl font-bold text-gray-900 mb-3">Configurez votre projet</h2>
              <p class="text-gray-600">Estimez votre investissement en quelques clics</p>
            </div>
            
            ${isComplet ? getConfigurateurCompletHTML(audit, formation) : getConfigurateurFormationHTML(formation)}
            
            ${isComplet && (state.includeAudit || state.includeFormation) ? '<div class="mt-8 bg-iavenir-500 p-6 rounded-2xl text-white text-center"><div class="text-lg mb-2">Investissement total estimé</div><div class="text-4xl font-bold">' + formatPrice(totalDevis) + '</div><div class="text-iavenir-200 text-sm mt-2">HT - Hors frais de déplacement</div></div>' : ''}
            
            ${state.includeFormation ? getROIHTML(roi) : ''}
          </div>
        </section>

        <section id="action" class="py-16 bg-gray-800">
          <div class="max-w-7xl mx-auto px-6">
            <div class="text-center mb-10">
              <h2 class="text-4xl font-bold text-white mb-3">Prêt à passer à l'action ?</h2>
              <p class="text-gray-400">Voici les prochaines étapes de notre collaboration</p>
            </div>
            
            <div class="grid md:grid-cols-3 gap-6">
              
              <!-- Bloc 1: Prochaines étapes -->
              <div class="bg-gray-700/50 p-6 rounded-2xl border border-gray-600">
                <h3 class="text-lg font-bold text-white mb-6 flex items-center gap-2">
                  ${icons.clock}
                  Prochaines étapes
                </h3>
                
                <!-- Point de départ -->
                <div class="text-center mb-4">
                  <div class="inline-flex items-center gap-2 bg-iavenir-600 text-white px-4 py-2 rounded-full font-semibold text-sm">
                    <span class="w-5 h-5 bg-white text-iavenir-600 rounded-full flex items-center justify-center font-bold text-xs">1</span>
                    Point dans 1 semaine
                  </div>
                </div>

                <!-- Flèche -->
                <div class="flex justify-center mb-3">
                  <div class="w-0.5 h-6 bg-gray-500"></div>
                </div>

                <!-- Question -->
                <div class="text-center mb-3">
                  <div class="inline-block bg-gray-600 text-gray-300 px-4 py-2 rounded-lg text-sm font-medium">
                    On avance ensemble ?
                  </div>
                </div>

                <!-- Branches -->
                <div class="flex justify-center mb-3">
                  <div class="flex items-end">
                    <div class="w-16 h-0.5 bg-gray-500"></div>
                    <div class="w-0.5 h-4 bg-gray-500"></div>
                  </div>
                  <div class="w-6"></div>
                  <div class="flex items-end">
                    <div class="w-0.5 h-4 bg-green-500"></div>
                    <div class="w-16 h-0.5 bg-green-500"></div>
                  </div>
                </div>

                <!-- Colonnes NON/OUI -->
                <div class="grid grid-cols-2 gap-4">
                  <div class="text-center">
                    <div class="text-gray-400 text-xs mb-2">↻ Pas maintenant</div>
                    <div class="bg-gray-600/50 p-3 rounded-lg border border-gray-500">
                      <div class="text-sm text-gray-300 font-medium">On reste en contact</div>
                    </div>
                  </div>
                  <div class="text-center">
                    <div class="text-green-400 text-xs mb-2">✓ On avance</div>
                    <div class="space-y-2">
                      <div class="bg-gray-600/50 p-2 rounded-lg border border-gray-500 text-sm text-gray-300">Signature</div>
                      <div class="bg-gray-600/50 p-2 rounded-lg border border-gray-500 text-sm text-gray-300">Kick-off</div>
                      ${state.includeAudit ? '<div class="bg-gray-600/50 p-2 rounded-lg border border-gray-500 text-sm text-gray-300">Audit</div>' : ''}
                      ${state.includeFormation ? '<div class="bg-gray-600/50 p-2 rounded-lg border border-gray-500 text-sm text-gray-300">Formation</div>' : ''}
                      <div class="bg-iavenir-600 p-2 rounded-lg text-sm text-white font-medium">Résultats ✓</div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Bloc 2: Récapitulatif Devis -->
              <div class="bg-gray-700/50 p-6 rounded-2xl border border-gray-600">
                <h3 class="text-lg font-bold text-white mb-6 flex items-center gap-2">
                  ${icons.barChart}
                  Récapitulatif Devis
                </h3>
                
                <!-- Services -->
                <div class="space-y-4 mb-6">
                  ${state.includeAudit ? '<div class="flex justify-between items-start"><div><div class="font-semibold text-white">Audit Stratégique</div><div class="text-sm text-gray-400">' + audit.days + ' jours</div></div><div class="text-xl font-bold text-white">' + formatPrice(audit.total) + '</div></div>' : ''}
                  ${state.includeFormation ? '<div class="flex justify-between items-start"><div><div class="font-semibold text-white">Formation</div><div class="text-sm text-gray-400">' + formation.sessions + ' sessions · ' + state.formationConfig.participants + ' pers.</div></div><div class="text-xl font-bold text-white">' + formatPrice(formation.final) + '</div></div>' : ''}
                </div>
                
                <!-- Total -->
                <div class="flex justify-between items-center py-4 border-t border-gray-600 mb-4">
                  <div class="font-bold text-white text-lg">TOTAL</div>
                  <div class="text-3xl font-bold text-white">${formatPrice(totalDevis)}</div>
                </div>
                <div class="text-center text-sm text-gray-400 mb-6">HT - Hors frais de déplacement</div>
                
                <!-- Date prochain RDV -->
                <div class="mb-4">
                  <label class="flex items-center gap-2 text-sm text-gray-400 mb-2">
                    📅 Date du prochain RDV
                  </label>
                  <input type="date" id="dateProchainPoint" value="${state.dateProchainPoint}" class="w-full p-3 rounded-xl bg-gray-600 border border-gray-500 text-white focus:border-iavenir-500 focus:outline-none">
                </div>
                
                <!-- Bouton Export PDF -->
                <button onclick="exportPDF()" class="w-full bg-iavenir-600 hover:bg-iavenir-700 text-white py-3 px-4 rounded-xl font-semibold transition flex items-center justify-center gap-2">
                  <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg>
                  Exporter en PDF
                </button>
              </div>

              <!-- Bloc 3: Votre contact -->
              <div class="bg-gray-700/50 p-6 rounded-2xl border border-gray-600">
                <h3 class="text-lg font-bold text-white mb-6 flex items-center gap-2">
                  ${icons.users}
                  Votre contact
                </h3>
                
                <div class="flex items-center gap-4 mb-6">
                  <div class="w-14 h-14 bg-iavenir-600 rounded-full flex items-center justify-center text-white text-lg font-bold">ML</div>
                  <div>
                    <div class="font-bold text-white text-lg">Mathieu Legeas</div>
                    <div class="text-sm text-gray-400">Fondateur</div>
                  </div>
                </div>
                
                <div class="space-y-4">
                  <div class="flex items-center gap-3 text-gray-300">
                    <div class="w-10 h-10 bg-gray-600 rounded-full flex items-center justify-center">
                      ${icons.phone}
                    </div>
                    <span>07 61 60 22 77</span>
                  </div>
                  <div class="flex items-center gap-3 text-gray-300">
                    <div class="w-10 h-10 bg-gray-600 rounded-full flex items-center justify-center">
                      ${icons.mail}
                    </div>
                    <span class="text-sm">mathieu.legeas@iavenir-formation.fr</span>
                  </div>
                </div>
                
                <div class="mt-6 pt-4 border-t border-gray-600">
                  <div class="flex items-center gap-2 text-gray-400 text-sm">
                    <span class="text-iavenir-400">${icons.award}</span>
                    <span>Organisme certifié Qualiopi</span>
                  </div>
                </div>
              </div>
              
            </div>
          </div>
        </section>

        <footer class="bg-gray-900 text-white py-8">
          <div class="max-w-6xl mx-auto px-6 text-center">
            <div class="text-2xl font-bold text-iavenir-400 mb-2">IAvenir</div>
            <p class="text-gray-400">Formation et conseil en Intelligence Artificielle</p>
          </div>
        </footer>
      `;

      // Event listeners
      const auditInput = document.getElementById('auditCollaborateurs');
      if (auditInput) {
        auditInput.addEventListener('change', (e) => {
          state.auditConfig.collaborateurs = parseInt(e.target.value) || 100;
          render();
        });
      }
      const formationInput = document.getElementById('formationParticipants');
      if (formationInput) {
        formationInput.addEventListener('change', (e) => {
          state.formationConfig.participants = parseInt(e.target.value) || 10;
          render();
        });
      }
      const formationSessions = document.getElementById('formationSessions');
      if (formationSessions) {
        formationSessions.addEventListener('change', (e) => {
          state.formationConfig.sessions = parseInt(e.target.value) || 1;
          render();
        });
      }
      const formationDate = document.getElementById('formationDate');
      if (formationDate) {
        formationDate.addEventListener('change', (e) => {
          state.formationConfig.dateFormation = e.target.value;
        });
      }
      const formationOutils = document.getElementById('formationOutils');
      if (formationOutils) {
        formationOutils.addEventListener('input', (e) => {
          state.formationConfig.outils = e.target.value;
        });
      }
      const formationCasUsages = document.getElementById('formationCasUsages');
      if (formationCasUsages) {
        formationCasUsages.addEventListener('input', (e) => {
          state.formationConfig.casUsages = e.target.value;
        });
      }
      const dateProchainPointInput = document.getElementById('dateProchainPoint');
      if (dateProchainPointInput) {
        dateProchainPointInput.addEventListener('change', (e) => {
          state.dateProchainPoint = e.target.value;
        });
      }
    }

    function toggleAudit() { state.includeAudit = !state.includeAudit; render(); }
    function toggleFormation() { state.includeFormation = !state.includeFormation; render(); }
    function setFormationDuration(d) { state.formationConfig.duration = d; render(); }
    function setFormationFormat(f) { state.formationConfig.format = f; render(); }
    function setParcours(mode) { 
      state.parcours = mode; 
      if (mode === 'complet') {
        state.includeAudit = true;
        state.includeFormation = true;
      } else {
        state.includeAudit = false;
        state.includeFormation = true;
      }
      render(); 
    }

    window.toggleAudit = toggleAudit;
    window.toggleFormation = toggleFormation;
    window.setFormationDuration = setFormationDuration;
    window.setFormationFormat = setFormationFormat;
    window.setParcours = setParcours;
    
    // Fonction export PDF
    function exportPDF() {
      const audit = calculateAudit();
      const formation = calculateFormation();
      const roi = calculateROI();
      const totalDevis = (state.includeAudit ? audit.total : 0) + (state.includeFormation ? formation.final : 0);
      const today = new Date().toLocaleDateString('fr-FR', { day: '2-digit', month: 'long', year: 'numeric' });
      const datePoint = state.dateProchainPoint ? new Date(state.dateProchainPoint).toLocaleDateString('fr-FR', { day: '2-digit', month: 'long', year: 'numeric' }) : 'Dans 1 semaine';
      const dateFormation = state.formationConfig.dateFormation ? new Date(state.formationConfig.dateFormation).toLocaleDateString('fr-FR', { day: '2-digit', month: 'long', year: 'numeric' }) : 'A definir';
      const outils = state.formationConfig.outils || 'A definir';
      const casUsages = state.formationConfig.casUsages || 'A definir';
      
      // Section Audit détaillée
      let auditHTML = '';
      if (state.includeAudit) {
        auditHTML = '<div style="background:#faf5ff;border:1px solid #e9d5ff;padding:10px;border-radius:6px;margin-bottom:8px;">' +
          '<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px;">' +
          '<div style="font-size:13px;font-weight:bold;color:#7c3aed;">🔍 Audit Strategique IA</div>' +
          '<div style="font-size:16px;font-weight:bold;color:#7c3aed;">' + formatPrice(audit.total) + ' HT</div></div>' +
          '<div style="display:flex;gap:15px;font-size:9px;color:#4b5563;">' +
          '<div style="flex:1;"><strong>Modalites:</strong><br>• Duree: ' + audit.days + ' jours<br>• ' + state.auditConfig.collaborateurs + ' collaborateurs audites<br>• Entretiens individuels + terrain</div>' +
          '<div style="flex:1;"><strong>Livrables:</strong><br>• Diagnostic de maturite IA<br>• Cartographie des processus<br>• Roadmap de transformation<br>• Quick wins actionnables</div>' +
          '</div></div>';
      }
      
      // Section Formation détaillée
      let formationHTML = '';
      if (state.includeFormation) {
        let remiseText = formation.discount > 0 ? ' <span style="color:#059669;">(remise -' + Math.round(formation.discount * 100) + '%)</span>' : '';
        formationHTML = '<div style="background:#f0fdf4;border:1px solid #bbf7d0;padding:10px;border-radius:6px;margin-bottom:8px;">' +
          '<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px;">' +
          '<div style="font-size:13px;font-weight:bold;color:#15803d;">🎓 Formation sur-mesure</div>' +
          '<div style="font-size:16px;font-weight:bold;color:#15803d;">' + formatPrice(formation.final) + ' HT' + remiseText + '</div></div>' +
          '<div style="display:flex;gap:15px;font-size:9px;color:#4b5563;">' +
          '<div style="flex:1;"><strong>Modalites pedagogiques:</strong><br>• Format: ' + (state.formationConfig.format === 'presentiel' ? 'Presentiel' : 'Distanciel') + '<br>• Duree: ' + state.formationConfig.duration + ' jour' + (state.formationConfig.duration > 1 ? 's' : '') + ' / session<br>• ' + formation.sessions + ' session' + (formation.sessions > 1 ? 's' : '') + ' (12 pers. max)<br>• ' + state.formationConfig.participants + ' participants formes</div>' +
          '<div style="flex:1;"><strong>Contenu:</strong><br>• Outils: ' + outils + '<br>• Cas d\'usage: ' + casUsages + '<br>• Date: ' + dateFormation + '<br>• 80% pratique, 20% theorie</div>' +
          '<div style="flex:1;"><strong>Inclus:</strong><br>• Support de formation<br>• Exercices sur vos donnees<br>• Suivi post-formation<br>• Certification Qualiopi</div>' +
          '</div></div>';
      }
      
      // ROI compact
      let roiHTML = '';
      if (state.includeFormation) {
        roiHTML = '<div style="display:flex;gap:8px;margin-bottom:10px;"><div style="flex:1;background:#f9fafb;padding:6px;text-align:center;border-radius:4px;border:1px solid #e5e7eb;"><div style="font-size:8px;color:#6b7280;">Temps gagne/pers./sem.</div><div style="font-size:13px;font-weight:bold;color:#8B5CF6;">' + roi.timeSavedDisplay + '</div></div><div style="flex:1;background:#f9fafb;padding:6px;text-align:center;border-radius:4px;border:1px solid #e5e7eb;"><div style="font-size:8px;color:#6b7280;">Gains nets/mois</div><div style="font-size:13px;font-weight:bold;color:#8B5CF6;">' + formatPrice(roi.avgMonthlyGains) + '</div></div><div style="flex:1;background:#f9fafb;padding:6px;text-align:center;border-radius:4px;border:1px solid #e5e7eb;"><div style="font-size:8px;color:#6b7280;">Retour sur invest.</div><div style="font-size:13px;font-weight:bold;color:#8B5CF6;">' + (roi.avgPayback > 0 ? Math.floor(roi.avgPayback) + ' mois' : '-') + '</div></div></div>';
      }
      
      // Prochaines étapes
      let etapesHTML = '<div style="text-align:center;margin-bottom:6px;"><div style="display:inline-block;background:#8B5CF6;color:white;padding:4px 10px;border-radius:12px;font-size:9px;font-weight:bold;">1 Point le ' + datePoint + '</div></div>';
      etapesHTML += '<div style="text-align:center;font-size:8px;color:#6b7280;margin-bottom:4px;">|</div>';
      etapesHTML += '<div style="text-align:center;margin-bottom:4px;"><div style="display:inline-block;background:#f3f4f6;padding:2px 6px;border-radius:4px;font-size:8px;color:#4b5563;">On avance ensemble ?</div></div>';
      etapesHTML += '<div style="display:flex;justify-content:center;gap:12px;font-size:8px;">';
      etapesHTML += '<div style="text-align:center;color:#9ca3af;"><div>↻ Pas maintenant</div><div style="background:#f3f4f6;padding:3px 6px;border-radius:4px;margin-top:2px;">On reste en contact</div></div>';
      etapesHTML += '<div style="text-align:center;color:#059669;"><div>✓ On avance</div>';
      etapesHTML += '<div style="background:#f0fdf4;padding:2px 5px;border-radius:3px;margin-top:2px;border:1px solid #bbf7d0;">Signature</div>';
      etapesHTML += '<div style="background:#f0fdf4;padding:2px 5px;border-radius:3px;margin-top:1px;border:1px solid #bbf7d0;">Kick-off</div>';
      if (state.includeAudit) etapesHTML += '<div style="background:#f0fdf4;padding:2px 5px;border-radius:3px;margin-top:1px;border:1px solid #bbf7d0;">Audit</div>';
      if (state.includeFormation) etapesHTML += '<div style="background:#f0fdf4;padding:2px 5px;border-radius:3px;margin-top:1px;border:1px solid #bbf7d0;">Formation</div>';
      etapesHTML += '<div style="background:#8B5CF6;color:white;padding:2px 5px;border-radius:3px;margin-top:1px;">Resultats ✓</div>';
      etapesHTML += '</div></div>';
      
      const htmlContent = '<!DOCTYPE html><html><head><meta charset="UTF-8"><title>IAvenir - Devis</title><style>@media print{body{-webkit-print-color-adjust:exact !important;print-color-adjust:exact !important;}@page{margin:8mm;size:A4;}}</style></head><body style="font-family:Arial,sans-serif;padding:12px 15px;color:#1f2937;background:white;max-width:100%;margin:0;font-size:10px;">' +
      
      // Header
      '<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;padding-bottom:8px;border-bottom:3px solid #8B5CF6;"><div><div style="font-size:22px;font-weight:bold;color:#8B5CF6;">IAvenir</div><div style="font-size:9px;color:#6b7280;">Formation et conseil en Intelligence Artificielle</div></div><div style="text-align:right;"><div style="font-size:16px;font-weight:bold;color:#1f2937;">Proposition Commerciale</div><div style="font-size:8px;color:#6b7280;">' + today + '</div></div></div>' +
      
      // Récapitulatif Devis (en haut, full width)
      '<div style="margin-bottom:10px;">' +
      '<div style="font-size:12px;font-weight:bold;color:#1f2937;margin-bottom:8px;display:flex;align-items:center;gap:6px;">📊 Recapitulatif de votre accompagnement</div>' +
      auditHTML + formationHTML +
      
      // Total
      '<div style="background:#8B5CF6;padding:10px 15px;border-radius:6px;color:white;display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;"><div><div style="font-size:12px;font-weight:bold;">INVESTISSEMENT TOTAL</div><div style="font-size:8px;opacity:0.9;">HT - Hors frais de deplacement eventuels</div></div><div style="font-size:24px;font-weight:bold;">' + formatPrice(totalDevis) + '</div></div>' +
      
      // ROI
      (state.includeFormation ? '<div style="margin-bottom:6px;"><div style="font-size:10px;font-weight:bold;color:#8B5CF6;margin-bottom:6px;">📈 ROI Estime</div>' + roiHTML + '</div>' : '') +
      '</div>' +
      
      // Frise temporelle - Parcours sur 12 mois
      '<div style="margin-bottom:10px;background:#f9fafb;padding:10px;border-radius:6px;border:1px solid #e5e7eb;">' +
      '<div style="font-size:10px;font-weight:bold;color:#1f2937;margin-bottom:8px;text-align:center;">📅 Votre parcours sur 12 mois</div>' +
      '<div style="position:relative;display:flex;justify-content:space-between;align-items:flex-start;padding:0 5px;">' +
      '<div style="position:absolute;top:12px;left:20px;right:20px;height:2px;background:linear-gradient(to right,#8B5CF6,#a78bfa,#c4b5fd);"></div>' +
      (state.includeAudit ? '<div style="text-align:center;z-index:1;"><div style="width:24px;height:24px;background:#8B5CF6;border-radius:50%;margin:0 auto 4px;display:flex;align-items:center;justify-content:center;"><span style="color:white;font-size:10px;">🔍</span></div><div style="font-size:7px;font-weight:bold;color:#4b5563;">Audit</div></div>' : '') +
      (state.includeFormation ? '<div style="text-align:center;z-index:1;"><div style="width:24px;height:24px;background:#8B5CF6;border-radius:50%;margin:0 auto 4px;display:flex;align-items:center;justify-content:center;"><span style="color:white;font-size:10px;">🎓</span></div><div style="font-size:7px;font-weight:bold;color:#4b5563;">Formation</div></div>' : '') +
      '<div style="text-align:center;z-index:1;"><div style="width:24px;height:24px;background:white;border:2px solid #8B5CF6;border-radius:50%;margin:0 auto 4px;display:flex;align-items:center;justify-content:center;"><span style="font-size:7px;color:#8B5CF6;font-weight:bold;">M+1</span></div><div style="font-size:7px;color:#4b5563;">Suivi KPI</div></div>' +
      '<div style="text-align:center;z-index:1;"><div style="width:24px;height:24px;background:white;border:2px solid #8B5CF6;border-radius:50%;margin:0 auto 4px;display:flex;align-items:center;justify-content:center;"><span style="font-size:7px;color:#8B5CF6;font-weight:bold;">M+6</span></div><div style="font-size:7px;color:#4b5563;">Comite IA</div></div>' +
      '<div style="text-align:center;z-index:1;"><div style="width:24px;height:24px;background:white;border:2px solid #8B5CF6;border-radius:50%;margin:0 auto 4px;display:flex;align-items:center;justify-content:center;"><span style="font-size:7px;color:#8B5CF6;font-weight:bold;">M+9</span></div><div style="font-size:7px;color:#4b5563;">Comite IA</div></div>' +
      '<div style="text-align:center;z-index:1;"><div style="width:24px;height:24px;background:#8B5CF6;border-radius:50%;margin:0 auto 4px;display:flex;align-items:center;justify-content:center;"><span style="color:white;font-size:10px;">🏆</span></div><div style="font-size:7px;font-weight:bold;color:#4b5563;">Bilan annuel</div></div>' +
      '</div></div>' +
      
      // 2 colonnes en bas: Prochaines étapes + Contact
      '<div style="display:flex;gap:12px;">' +
      
      // Colonne 1: Prochaines étapes
      '<div style="flex:1;background:#f9fafb;padding:10px;border-radius:6px;border:1px solid #e5e7eb;"><div style="font-size:10px;font-weight:bold;color:#1f2937;margin-bottom:8px;">⏱ Prochaines etapes</div>' + etapesHTML + '</div>' +
      
      // Colonne 2: Contact
      '<div style="flex:0.7;background:#f9fafb;padding:10px;border-radius:6px;border:1px solid #e5e7eb;"><div style="font-size:10px;font-weight:bold;color:#1f2937;margin-bottom:8px;">👤 Votre contact</div><div style="display:flex;align-items:center;gap:8px;margin-bottom:8px;"><div style="width:32px;height:32px;background:#8B5CF6;border-radius:50%;color:white;font-weight:bold;font-size:11px;display:flex;align-items:center;justify-content:center;">ML</div><div><div style="font-weight:bold;font-size:10px;">Mathieu Legeas</div><div style="font-size:8px;color:#6b7280;">Fondateur</div></div></div><div style="font-size:9px;color:#4b5563;margin-bottom:3px;">📞 07 61 60 22 77</div><div style="font-size:8px;color:#4b5563;margin-bottom:6px;">✉ mathieu.legeas@iavenir-formation.fr</div><div style="font-size:8px;color:#8B5CF6;padding-top:6px;border-top:1px solid #e5e7eb;">✓ Organisme certifie Qualiopi</div></div>' +
      
      '</div>' +
      
      // Footer
      '<div style="text-align:center;font-size:7px;color:#9ca3af;margin-top:8px;">IAvenir - www.iavenir-formation.fr</div>' +
      
      '</body></html>';
      
      // Ouvrir une nouvelle fenêtre et imprimer
      const printWindow = window.open('', '_blank');
      printWindow.document.write(htmlContent);
      printWindow.document.close();
      printWindow.focus();
      setTimeout(function() {
        printWindow.print();
      }, 250);
    }
    
    window.exportPDF = exportPDF;
    
    render();
  </script>
</body>
</html>
